import{aS as O,bY as q,j as b,r as N,n as D,c as X,d as V,g as F,bX as B,h as I,O as Y,b3 as z,u as J,L as G,o as U,C as H,E as W,bC as Z,V as K,aJ as ee,aT as A,au as te}from"./index.6e57c2f1.js";import{b as se}from"./next-frame-once.e0fd6a2a.js";import{g as ne}from"./Space.2af8f31d.js";function re(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(i=>{if(i==="")return;const[r,n]=i.split(":");n===void 0?t[""]=r:t[r]=n}),t}function x(e,t){var i;if(e==null)return;const r=re(e);if(t===void 0)return r[""];if(typeof t=="string")return(i=r[t])!==null&&i!==void 0?i:r[""];if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n){const s=t[n];if(s in r)return r[s]}return r[""]}else{let n,s=-1;return Object.keys(r).forEach(l=>{const o=Number(l);!Number.isNaN(o)&&t>=o&&o>=s&&(s=o,n=r[l])}),n}}function oe(e){var t;const i=(t=e.dirs)===null||t===void 0?void 0:t.find(({dir:r})=>r===O);return!!(i&&i.value===!1)}const ie={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function ae(e){return`(min-width: ${e}px)`}const C={};function le(e=ie){if(!q)return b(()=>[]);if(typeof window.matchMedia!="function")return b(()=>[]);const t=N({}),i=Object.keys(e),r=(n,s)=>{n.matches?t.value[s]=!0:t.value[s]=!1};return i.forEach(n=>{const s=e[n];let l,o;C[s]===void 0?(l=window.matchMedia(ae(s)),l.addEventListener?l.addEventListener("change",d=>{o.forEach(u=>{u(d,n)})}):l.addListener&&l.addListener(d=>{o.forEach(u=>{u(d,n)})}),o=new Set,C[s]={mql:l,cbs:o}):(l=C[s].mql,o=C[s].cbs),o.add(r),l.matches&&o.forEach(d=>{d(l,n)})}),D(()=>{i.forEach(n=>{const{cbs:s}=C[e[n]];s.has(r)&&s.delete(r)})}),b(()=>{const{value:n}=t;return i.filter(s=>n[s])})}const j=1,P=X("n-grid"),T=1,L={span:{type:[Number,String],default:T},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},ve=Y(L),me=V({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:L,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:i,overflowRef:r}=F(P),n=z();return{overflow:r,itemStyle:i,deriveStyle:()=>{e.value;const{privateSpan:s=T,privateShow:l=!0,privateColStart:o=void 0,privateOffset:d=0}=n.vnode.props,{value:u}=t,S=B(u||0);return{display:l?"":"none",gridColumn:`${o!=null?o:`span ${s}`} / span ${s}`,marginLeft:d?`calc((100% - (${s} - 1) * ${S}) / ${s} * ${d} + ${S} * ${d})`:""}}}},render(){var e,t;return I("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}}),fe={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Q=24,$="__ssr__",ue={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Q},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},he=V({name:"Grid",inheritAttrs:!1,props:ue,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:i}=J(e),r=/^\d+$/,n=N(void 0),s=le((i==null?void 0:i.value)||fe),l=G(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),o=b(()=>{if(!!l.value)return e.responsive==="self"?n.value:s.value}),d=G(()=>{var f;return(f=Number(x(e.cols.toString(),o.value)))!==null&&f!==void 0?f:Q}),u=G(()=>x(e.xGap.toString(),o.value)),S=G(()=>x(e.yGap.toString(),o.value)),E=f=>{n.value=f.contentRect.width},v=f=>{se(E,f)},w=N(!1),R=b(()=>{if(e.responsive==="self")return v}),p=N(!1),m=N();return U(()=>{const{value:f}=m;f&&f.hasAttribute($)&&(f.removeAttribute($),p.value=!0)}),H(P,{isSsrRef:p,itemStyleRef:W(e,"itemStyle"),xGapRef:u,overflowRef:w}),{isSsr:!Z,contentEl:m,mergedClsPrefix:t,style:b(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${d.value}, minmax(0, 1fr))`,columnGap:B(u.value),rowGap:B(S.value)})),isResponsive:l,responsiveQuery:o,responsiveCols:d,handleResize:R,overflow:w}},render(){const e=()=>{var t,i,r,n,s,l,o;this.overflow=!1;const d=ee(ne(this)),u=[],{collapsed:S,collapsedRows:E,responsiveCols:v,responsiveQuery:w}=this;d.forEach(a=>{var y,h,c,g;if(((y=a==null?void 0:a.type)===null||y===void 0?void 0:y.__GRID_ITEM__)!==!0)return;if(oe(a)){const _=A(a);_.props?_.props.privateShow=!1:_.props={privateShow:!1},u.push({child:_,rawChildSpan:0});return}a.dirs=((h=a.dirs)===null||h===void 0?void 0:h.filter(({dir:_})=>_!==O))||null;const M=A(a),k=Number((g=x((c=M.props)===null||c===void 0?void 0:c.span,w))!==null&&g!==void 0?g:j);k!==0&&u.push({child:M,rawChildSpan:k})});let R=0;const p=(t=u[u.length-1])===null||t===void 0?void 0:t.child;if(p!=null&&p.props){const a=(i=p.props)===null||i===void 0?void 0:i.suffix;a!==void 0&&a!==!1&&(R=(n=(r=p.props)===null||r===void 0?void 0:r.span)!==null&&n!==void 0?n:j,p.props.privateSpan=R,p.props.privateColStart=v+1-R,p.props.privateShow=(s=p.props.privateShow)!==null&&s!==void 0?s:!0)}let m=0,f=!1;for(const{child:a,rawChildSpan:y}of u){if(f&&(this.overflow=!0),!f){const h=Number((o=x((l=a.props)===null||l===void 0?void 0:l.offset,w))!==null&&o!==void 0?o:0),c=Math.min(y+h,v);if(a.props?(a.props.privateSpan=c,a.props.privateOffset=h):a.props={privateSpan:c,privateOffset:h},S){const g=m%v;c+g>v&&(m+=v-g),c+m+R>E*v?f=!0:m+=c}}f&&(a.props?a.props.privateShow!==!0&&(a.props.privateShow=!1):a.props={privateShow:!1})}return I("div",te({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[$]:this.isSsr||void 0},this.$attrs),u.map(({child:a})=>a))};return this.isResponsive&&this.responsive==="self"?I(K,{onResize:this.handleResize},{default:e}):e()}});export{me as _,he as a,L as b,ve as g};
