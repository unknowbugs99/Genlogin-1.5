import{d as S,ca as oe,r as te,j as ne,ae as se,X as w,Y as b,a4 as e,a3 as o,Z as t,ab as le,c8 as O,K as W,a6 as p,a_ as ae,a8 as z,W as q,_ as E,a5 as v,c9 as K,af as X,o as re,cD as ie,$ as pe}from"./index.6e57c2f1.js";import{u as ue,a as ce,i as U,C as _e,S as de,c as me,A as fe,D as ge,d as we,e as he,f as ve,_ as ye,g as ke,b as B,h as $e}from"./ShareOnCloud.vue_vue_type_script_setup_true_lang.0e4e89b5.js";import{F as Ce,_ as Ge}from"./ProfileSummary.vue_vue_type_style_index_0_lang.8714f0d0.js";import{I as Pe}from"./IosMore.7ba500b7.js";import{_ as N}from"./Input.bebd1abf.js";import{_ as Me,a as Y}from"./Popconfirm.82d98610.js";import{_ as xe}from"./Dropdown.fdbd6883.js";import{_ as A}from"./Space.2af8f31d.js";import{_ as Z,a as J}from"./Grid.aa914ce4.js";import{b as be}from"./headers.daf31bae.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./InputNumber.7f06f099.js";import"./FormItem.5b33b5bf.js";import"./get.556bbf62.js";import"./use-merged-state.14d1217d.js";import"./Add.fbc88024.js";import"./Select.cca7837d.js";import"./Tag.f1f916fe.js";import"./use-compitable.be4359a7.js";import"./cssr.27de2d53.js";import"./Popover.1a4e3ffd.js";import"./next-frame-once.e0fd6a2a.js";import"./chrome-icon.de460a19.js";import"./firefox-icon.a50947ef.js";import"./helpers.34775daf.js";import"./validate.5eb70dfd.js";import"./Scrollbar.66e6813c.js";import"./RadioGroup.eb33361c.js";import"./Checkbox.cf4db95d.js";const Se={key:0,class:"bulk-actions py-2"},Ue=p(" Start "),De=p(" Stop "),ze=p(" New fingerprint "),Be=p(" Confirm to change fingerprint selected profiles? "),Ne=p(" Remove from group "),Ae=p(" Confirm to remove selected profiles? "),Ie=S({__name:"ProfileInGroupTable",props:{profiles:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(y,{expose:a}){const u=y,{profiles:r}=oe(u),{rowProps:s,profileColumns:i,selectedProfile:c,selectedProfiles:n}=ue(),{bulkMoreActions:l,checkedRowKeys:d,cancelBulk:g,startBulkProfiles:h,stopBulkProfiles:f,handleSelectBulkMore:k,newFingerPrint:_}=ce(),{removeProfileFromGroup:$}=U(),C=te(""),I=ne(()=>r.value.filter(G=>G.profile_data.name.includes(C.value))),R=se({pageSize:100}),F=async()=>{try{window.$message.loading("Removing..."),await $(n.value),window.$message.info("Profiles removed")}catch{window.$message.info("Profiles remove failed")}finally{window.$message.destroyAll()}};return a({checkedRowKeys:d}),(G,P)=>{const m=N,M=ae,x=z,j=Me,L=xe,T=A,Q=Y,H=Z,ee=J;return w(),b(W,null,[e(T,null,{default:o(()=>[e(m,{value:C.value,"onUpdate:value":P[0]||(P[0]=D=>C.value=D),type:"text",placeholder:"Search...",clearable:""},null,8,["value"]),e(ee,{"x-gap":"12",cols:3},{default:o(()=>[e(H,{span:"2"},{default:o(()=>[t(d).length?(w(),b("div",Se,[e(T,null,{default:o(()=>[e(x,{size:"small",ghost:"",onClick:t(g)},{icon:o(()=>[e(M,null,{default:o(()=>[e(t(_e))]),_:1})]),_:1},8,["onClick"]),e(x,{size:"small",type:"primary",onClick:t(h)},{icon:o(()=>[e(M,null,{default:o(()=>[e(t(de))]),_:1})]),default:o(()=>[Ue]),_:1},8,["onClick"]),e(x,{size:"small",ghost:"",type:"error",onClick:t(f)},{icon:o(()=>[e(M,null,{default:o(()=>[e(t(me))]),_:1})]),default:o(()=>[De]),_:1},8,["onClick"]),e(j,{onPositiveClick:t(_)},{trigger:o(()=>[e(x,{size:"small",ghost:"",type:"success"},{icon:o(()=>[e(M,null,{default:o(()=>[e(t(Ce))]),_:1})]),default:o(()=>[ze]),_:1})]),default:o(()=>[Be]),_:1},8,["onPositiveClick"]),e(j,{onPositiveClick:F},{trigger:o(()=>[e(x,{size:"small",ghost:"",type:"error"},{icon:o(()=>[e(M,{color:"red"},{default:o(()=>[e(t(fe))]),_:1})]),default:o(()=>[Ne]),_:1})]),default:o(()=>[Ae]),_:1}),e(L,{trigger:"hover",options:t(l),onSelect:t(k)},{default:o(()=>[e(x,{size:"small"},{default:o(()=>[e(M,null,{default:o(()=>[e(t(Pe))]),_:1})]),_:1})]),_:1},8,["options","onSelect"])]),_:1})])):le("",!0),e(T,{vertical:""},{default:o(()=>{var D;return[e(Q,{"checked-row-keys":t(n),"onUpdate:checked-row-keys":P[1]||(P[1]=V=>O(n)?n.value=V:null),columns:t(i),data:(D=C.value)!=null&&D.length?t(I):t(r),"row-props":t(s),"row-key":V=>V.id,loading:y.loading,pagination:R,"max-height":700},null,8,["checked-row-keys","columns","data","row-props","row-key","loading","pagination"])]}),_:1})]),_:1}),e(H,null,{default:o(()=>[e(Ge,{profile:t(c)?t(c):void 0},null,8,["profile"])]),_:1})]),_:1})]),_:1}),e(ge),e(we),e(he),e(ve),e(ye),e(ke)],64)}}}),Re=v("div",null,"Create new Group",-1),Fe={class:"d-flex flex-row mt-3 mb-2 align-items-center"},Te=p(" Cancel "),Ve=p(" Create "),qe=S({__name:"CreateGroupModal",setup(y){const{showModals:a}=U(),u=B(),{profileGroup:r}=q(u),s=()=>{r.value.name="",a.showCreateGroupModal=!1},i=async()=>{try{window.$message.loading("Creating..."),await u.createProfileGroup(r.value.name)?(window.$message.success("Profile group created"),s()):window.$message.warning("Profile must be unique")}catch{window.$message.info("Create profile group failed")}finally{window.$message.destroyAll()}};return(c,n)=>{const l=N,d=z,g=A,h=K;return w(),E(h,{show:t(a).showCreateGroupModal,"onUpdate:show":n[1]||(n[1]=f=>t(a).showCreateGroupModal=f),"transform-origin":"center",preset:"dialog","on-mask-click":s},{header:o(()=>[Re]),action:o(()=>[e(g,null,{default:o(()=>[e(d,{size:"small",onClick:s},{default:o(()=>[Te]),_:1}),e(d,{size:"small",type:"primary",onClick:i},{default:o(()=>[Ve]),_:1})]),_:1})]),default:o(()=>[v("div",Fe,[e(l,{value:t(r).name,"onUpdate:value":n[0]||(n[0]=f=>t(r).name=f),autofocus:"",type:"text"},null,8,["value"])])]),_:1},8,["show"])}}}),Ee=v("div",null,"Update group",-1),Ke={class:"d-flex flex-row mt-3 mb-2 align-items-center"},je=p(" Cancel "),He=p(" Update "),Oe=S({__name:"UpdateGroupModal",setup(y){const{showModals:a,seletedGroup:u}=U(),r=B(),{profileGroup:s}=q(r),i=()=>{var n;s.value.name=(n=u.value)==null?void 0:n.name,a.showUpdateGroupModal=!1},c=async()=>{try{window.$message.loading("Creating...");const n=s.value.name;await r.updateProfileGroup(s.value.name,s.value.id)?(window.$message.success("Profile group name updated"),u.value.name=n,i()):window.$message.warning("Profile must be unique")}catch{window.$message.info("Update profile group failed")}finally{window.$message.destroyAll()}};return(n,l)=>{const d=N,g=z,h=A,f=K;return w(),E(f,{show:t(a).showUpdateGroupModal,"onUpdate:show":l[1]||(l[1]=k=>t(a).showUpdateGroupModal=k),"transform-origin":"center",preset:"dialog","on-mask-click":i},{header:o(()=>[Ee]),action:o(()=>[e(h,null,{default:o(()=>[e(g,{size:"small",onClick:i},{default:o(()=>[je]),_:1}),e(g,{size:"small",type:"primary",onClick:c},{default:o(()=>[He]),_:1})]),_:1})]),default:o(()=>[v("div",Ke,[e(d,{value:t(s).name,"onUpdate:value":l[0]||(l[0]=k=>t(s).name=k),autofocus:"",type:"text"},null,8,["value"])])]),_:1},8,["show"])}}}),We=p(" Delete profile group: "),Xe={class:"font-700"},Ye=S({__name:"DeleteProfileGroupModal",setup(y){const{showModals:a,seletedGroup:u}=U(),r=B(),{profileGroup:s}=q(r),i=async()=>{try{window.$message.loading("Deleting...");const{id:c}=s.value;await r.deleteProfilesGroup([c]),window.$message.info("Profile group deleted")}catch{window.$message.info("Delete profile group failed")}finally{a.showDeleteGroupModal=!1,u.value=null,window.$message.destroyAll()}};return(c,n)=>{const l=K;return w(),E(l,{show:t(a).showDeleteGroupModal,"onUpdate:show":n[0]||(n[0]=d=>t(a).showDeleteGroupModal=d),preset:"dialog",title:"",content:"Are you sure?","positive-text":"Delete","negative-text":"Cancel",onPositiveClick:i},{header:o(()=>[v("div",null,[We,v("span",Xe,X(t(s).name),1)])]),_:1},8,["show"])}}}),Ze={key:0},Je=p(" New group "),Le={key:1},Qe=p(" Edit "),eo=p(" Delete "),Do=S({__name:"Groups",setup(y){const a=B(),{showModals:u,rowProps:r,groupColumns:s,seletedGroup:i,profileGroups:c,profileGroup:n,keywordSearch:l,searchResults:d,profiles:g,loadingProfiles:h}=U(),f=()=>{n.value.name="",u.showCreateGroupModal=!0};return re(async()=>{await a.getProfileGroups(),i.value=null}),ie(()=>{i.value=null}),(k,_)=>{const $=z,C=N,I=Y,R=Z,F=J,G=A,P=be;return w(),b(W,null,[t(i)?(w(),b("div",Le,[e(G,null,{default:o(()=>[e($,{strong:"",secondary:"",circle:"",onClick:_[2]||(_[2]=m=>i.value=null)},{icon:o(()=>[e(t(pe),{type:"arrowBack"})]),_:1}),e(P,null,{default:o(()=>{var m;return[p(X((m=t(i))==null?void 0:m.name),1)]}),_:1}),v("div",null,[e($,{class:"mr-2",size:"small",ghost:"",type:"primary",onClick:_[3]||(_[3]=m=>t(u).showUpdateGroupModal=!0)},{default:o(()=>[Qe]),_:1}),e($,{size:"small",ghost:"",type:"error",onClick:_[4]||(_[4]=m=>t(u).showDeleteGroupModal=!0)},{default:o(()=>[eo]),_:1})]),e(Ie,{profiles:t(g),loading:t(h).valueOf()},null,8,["profiles","loading"])]),_:1})])):(w(),b("div",Ze,[e($,{type:"primary",class:"mb-2",onClick:_[0]||(_[0]=m=>f())},{default:o(()=>[Je]),_:1}),e(G,{vertical:""},{default:o(()=>[e(C,{id:"searchInput",value:t(l),"onUpdate:value":_[1]||(_[1]=m=>O(l)?l.value=m:null),type:"text",placeholder:"Search...",clearable:""},null,8,["value"]),e(F,{"x-gap":"12",cols:3},{default:o(()=>[e(R,{span:"2"},{default:o(()=>[e(I,{columns:t(s),data:t(l).length?t(d):t(c),"row-props":t(r)},null,8,["columns","data","row-props"])]),_:1})]),_:1})]),_:1})])),e(qe),e(Oe),e(Ye),e($e)],64)}}});export{Do as default};
