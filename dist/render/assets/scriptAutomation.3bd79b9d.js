import{ci as m,cr as r}from"./index.6e57c2f1.js";import{v}from"./validate.5eb70dfd.js";var c,S=new Uint8Array(16);function g(){if(!c&&(c=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(S)}var n=[];for(var p=0;p<256;++p)n.push((p+256).toString(16).substr(1));function x(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase();if(!v(i))throw TypeError("Stringified UUID is invalid");return i}function d(t,e,i){t=t||{};var s=t.random||(t.rng||g)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){i=i||0;for(var a=0;a<16;++a)e[i+a]=s[a];return e}return x(s)}const b=[{label:"Navigate (url)",value:"NavigateToUrl",icon:"navigate",type:"info"},{label:"Go back",value:"GoBack",icon:"goBack",type:"info"},{label:"Type text (selector, text)",value:"TypeText",icon:"typeText",type:"info"},{label:"Click (selector)",value:"Click",icon:"click",type:"success"},{label:"Key press (Enter)",value:"KeyPressEnter",icon:"typeText",type:"success"},{label:"Wait (x) seconds",value:"Wait",icon:"wait",type:"default"},{label:"Wait random seconds (x, y)",value:"WaitRandom",icon:"wait",type:"default"},{label:"End script (Close tab)",value:"EndScript",icon:"exit",type:"default"}],u=t=>b.find(i=>i.value===t)||{type:"default",icon:"",label:"",content:"",name:"",value:""},E=m("scriptAutomation",{state:()=>({list:[],script:{id:"",name:"",actions:[]},action:{id:"",name:"NavigateToUrl",value:""},isEdit:!1}),actions:{resetActionState(){let t="";this.action.name==="Wait"?t=1:this.action.name==="WaitRandom"?t=[1,5]:this.action.name==="TypeText"&&(t=["",""]),this.$patch({action:{value:t}})},addAction(){const{name:t,value:e}=this.action;if(t===null)return;const i=u(this.action.name),{icon:s,label:a,type:o}=i,l={id:d(),name:t,value:e,icon:s,type:o,title:a,content:e};this.script.actions.push(Object.assign({},l)),this.resetActionState()},cancelEditAction(){this.$patch({action:{value:""},isEdit:!1})},editAction(t){const{id:e,name:i,value:s}=t;this.$patch({action:{id:e,name:i,value:s},isEdit:!0})},updateAction(){const{id:t,name:e,value:i}=this.action,s=this.script.actions.findIndex(y=>y.id===t),a=u(this.action.name),{icon:o,label:l,type:h}=a,f={id:t,name:e,value:i,icon:o,type:h,title:l,content:i};this.script.actions.splice(s,1,f),this.resetActionState(),this.$patch({isEdit:!1})},deleteAction(t){const e=this.script.actions.findIndex(i=>i.id===t);this.script.actions.splice(e,1)},resetScriptState(){this.$patch(t=>{t.script={id:"",name:"",actions:[]}})},setScript(t=null){t?this.$patch(e=>{e.script=t}):this.resetScriptState()},async saveScript(){const t={...r(this.script),id:d()};this.$patch(e=>{e.list.push(t)}),this.resetScriptState()},async updateScript(){const t=r(this.script),e=this.list.findIndex(i=>i.id===t.id);this.$patch(i=>{i.list.splice(e,1,t)}),this.resetScriptState()},deleteScript(t){const e=this.list.findIndex(i=>i.id===t);this.$patch(i=>{i.list.splice(e,1)}),this.resetScriptState()}},persist:{paths:["list"]}});export{b as a,E as u};
